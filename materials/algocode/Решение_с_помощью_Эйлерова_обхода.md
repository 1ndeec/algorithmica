Выпишем эйлеров обход дерева (3 вариант - выписывая вершину каждый раз,
как мы в нее попадаем). Заметим, что из всех вершин на отрезке от
вершины $u$ до вершины $v$ наименьшее расстояние от корня будет
иметь $lca(u, v)$, Докажем :

1\) $lca(u, v)$ входит в отрезок, так как она содержится на пути между
ними. 2) Весь отрезок содержится в поддереве $lca(u, v)$, так как мы
не могли выйти из нее

Будем считать, что $tout_{u} \<= tin_{v}$, если это не так свапнем
вершины. Тогда давайте выпишем не только эйлеров обход, но и массив
глубин вершин эйлерова обхода, тогда давайте найдем минимальное число
на отрезке от $tout_{u}$ до $tin_{v}$, тогда вершина, которая
соответствует минимуму на отрезке - $lca(u, v)$, Искать минимум
на отрезке можно с помощью следующих структур

1\)[Sparse Table](Sparse_Table "wikilink")

2\)[Корневая декомпозиция](Корневая_декомпозиция "wikilink")

3\)[Дерево отрезков](Дерево_отрезков "wikilink")

На практике чаще всего используется 1 способ, так как он отвечает за
$O(1)$ на запрос минимума на отрезке