<accesscontrol>Administrators</accesscontrol>

## Полезные ссылки

[Админка algocode](https://algocode.ru/admin)

[Админка ejudge](http://ejudge.algocode.ru/cgi-bin/serve-control)

[Google таблица с программами
параллелей](https://docs.google.com/spreadsheets/d/1_YcRjvvCtU6tX2nbW7pXiDBUqb5KyNq6thQZt9rsBxE/edit?usp=sharing)

## algocode

Адмика: <https://algocode.ru/admin>

Заходить надо с известным вам логином и паролем

### Инструкция по пользованию

\#TODO Написать инструкцию

### Правила пользования

\#TODO Написать правила, которые надо соблюдать

## ejudge

Адмика: <http://ejudge.algocode.ru/cgi-bin/serve-control>

### Как создать контест

Все исходники задачи (решения, чекеры, валидаторы и т.д.) должны быть
желательно написаны на c++. Также допускается java, но если вы
используете testlib на java, то будьте готовы к тому, что
внезапно он может перестать работать (testlib на java не
поддерживает распараллеливание и если на нескольких инвокерах
тестируется задача, то чекер или интерактор может упасть). C testlib
на c++ таких проблем нет. **Pascal не допускается**. Ejudge просто не
умеет его собирать.

#### Перед перым импортом

Перед импортом убедитесь, что у вас есть ssh к серверу. Если нет, но
напишите @grphil я дам ssh доступ.

Перед первым импортом зайдите на сервер и вбейте команду
`polygon-to-ejudge`. Далее в поля

  - `Login` вбейте `tgen`
  - `Password` вбейте `0e7b29e47605e334d07931c2609d8752`
  - `API Key` вбейте `e4f5e8d1c7c18f5241f4629678a2412ada90a7e5`
  - `API Secret` вбейте `49e085ce4dde87b6cf284abd64a6ee09478ead16`

#### Импорт контеста

Импорт контеста состоит из нескольких шагов:

1.  В начале надо в полигоне создать контест. Обязательно следуйте
    правилам из страницы [правил подготовки контестов на
    polygon](Правила_подготовки_контестов_на_polygon "wikilink").
2.  В контесте для каждой задачи надо создать full пакеты с
    верификацией. Обратите внимание, что в полигоне прямо в
    контесте есть кнопка "Build full packages", надо нажать на
    **соседнюю кнопку** `"+verify"`.
3.  Все дельнейшие действия надо выполнять с админки ejudge. Зайдите в
    админку ejudge и нажмите на кнопку `"create new contest"`.
4.  Вам будет предложено выбрать номер и шаблон для контеста. Нумеровать
    контест надо **строго следуя [правилам нумерации
    контестов](#Правила_нумерации_контестов "wikilink")**.
    Не в коем случае не создавайте контест без шаблона. В качестве
    шаблона **Обязательно выберите шаблон вашей параллели**. Всего
    есть 5 шаблонов контестов разных параллелей:
    1.  Параллель A - 21000, Tinkoff Generation 2020-2021. A. Template
    2.  Параллель A' - 22000, Tinkoff Generation 2020-2021. A'. Template
    3.  Параллель B - 23000, Tinkoff Generation 2020-2021. B. Template
    4.  Параллель B' - 24000, Tinkoff Generation 2020-2021. B'. Template
    5.  Параллель C - 25000, Tinkoff Generation 2020-2021. C. Template
5.  Если вы пронумеруете контест не так, как надо, или наследуетесь от
    неправильного шаблона, **Мы будем вынужденны удалить ваш
    контест**. Без обид.
6.  После выбора шаблона и номера нажмите кнопку `"Create contest!"`.
7.  После создания вы попадёте на страницу настроек контеста (для уже
    готовых контестов она доступна по ссылке `"settings"` из главного
    списка контестов).
8.  В этом окне в полях `"Name"` и `"Name (English)"` укажите одно и то
    же название контеста (в соответствии с
    [правилами](Правила_подготовки_контестов_на_polygon "wikilink")).
9.  В поле `"Contest to share users with"` укажите контест, который
    является шаблоном вашей параллели. Если укажете неправильно,
    никто не сможет в ваш контест зайти.
10. Так же во вкладке `"URLs"` можете указать ссылки на таблицу
    результатов и на условия. Но можете забить и не указывать.
11. Когда наконец всё готово, вы можете нажать кнопку `"COMMIT
    changes!"`, после этого вернитесь на главную страницу админки
    ejudge.
12. Все дальнейшие действия надо делать через ssh к серверу
13. Убедитесь, что вы сделали действия [\#Перед перым
    импортом](#Перед_перым_импортом "wikilink")
14. Вбейте команду `polygon-to-ejudge -h`
15. Вам будут показаны возможные сценарии использования скрипта импорта.
    Скорее всего вам потребуется опция `ic` или `ip`.
16. Вбейте нужную команду и дождитесь завершения. Если в процессе
    импорта произошла ошибка, то последняя начатая
    импортироваться задача импортирована не будет. Если
    вы импортировали одну задачу, то поправьте её и повторите снова,
    если вы импортировали контест и у вас в середине что-то сломалось,
    то рекомендуется вбить `polygon-to-ejudge rc <id контеста>`, чтобы
    потом заново контест заимпортировать.
17. После успешного импорта зайдите на главную страницу админки ejudge,
    а оттуда в настройки созданного вами контеста.
18. В настройках задач контеста (сверху кнопка problems) появится список
    задач. На каждую из них можно нажать и там поредачить параметры
    задачи (например TL, ML, название и всякое такое).
19. Когда наконец всё готово, вы можете нажать кнопку `"COMMIT
    changes!"`.
20. Проверьте, что везде написанно OK, промотайте вниз и внизу нажмите
    `"Check contest settings"`.
21. После этого ejudge соберёт все исходники задачи.
22. Иногда там возникают ошибки компиляции. В этом случае надо
    1.  Поправить в полигоне все ошибки
    2.  Вернуться на главную страницу админки ejudge, повторить пункты
        1-2 инструкции
    3.  Зайти по ssh на сервак.
    4.  Если нужно обновить одну задачу, то вбить `polygon-to-ejudge up
        -h` и дальше написать правильную команду обновления.
    5.  Если нужно обновить много задач, то вбить `polygon-to-ejudge uс
        -h` и дальше написать правильную команду обновления контеста.
    6.  Выполнить пункты 17-22.
23. Чтобы управлять контестом (например начать) зайдите в `"Master"`
    контеста.

### Правила нумерации контестов

Правила нумерации очень простые. У каждой параллели есть её шаблон,
имеющий номер 2x000. Все контесты параллели должны иметь номера в
порядке возрастания на 1 от номера шаблона. Например контесты
параллели B' должны иметь номера 24001, 24002, 24003 $\\ldots$.

### Правила созданиия логинов пользователям

Логин пользователя должен иметь вид `<параллель>-<год>-<фамилия>`.
Например `ap-2019-surname`. Для создания большого количества
логинов для списка людей пишите в телеграмм @grphil.

## [Правила подготовки контестов на polygon](Правила_подготовки_контестов_на_polygon "wikilink")

Правила доступны на отдельной странице.